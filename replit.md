# Civic Signal Hub - Governance System

## Overview

The Civic Signal Hub is a modern full-stack governance application designed to support community-based decision making, accountability tracking, and participatory governance. The system implements novel concepts like "Loop Ledger" for commitment tracking, signal detection for system health monitoring, and trust-based accountability mechanisms.

## User Preferences

Preferred communication style: Simple, everyday language.

### Design Philosophy
- Sacred civic space feeling, not an app
- Tone: Everything as invitation, not command
- Typography: Forest-like breathing space, not cramped forms
- Micro-interactions: Soft hovers, glowing checkmarks, fluid transitions = lived grace
- Symbols: Simple glyphs for loop, ripple, sanctuary, field - let mythos speak quietly
- Functionality: Autonomous deployment - anyone can launch hub without permission and feel trusted
- Transparency: Invited not imposed, with public/private toggles

## Mission Statement

The Field Nexus (formerly Civic Signal Hub) serves as a governance operating system for wellbeing communities and institutions seeking to break free from stuck loops and hierarchical patterns. Our goal is to provide any organization with the tools needed to create regenerative, trust-based decision-making processes that heal rather than harm.

### Core Governance Philosophy

The system is designed to perform critical governance roles traditionally handled by governments but without hierarchy, coercion, or centralization:

1. **Sensemaking**: Perceive the field and understand systemic patterns
2. **Decision Making**: Enable collective intelligence and non-hierarchical choice-making
3. **Resource Allocation**: Ensure transparent, trust-guided distribution
4. **Cultural Regulation**: Shape coherence through ethical design and shared agreements
5. **Continuity & Replication**: Enable sustainable, decentralized power sharing

### Target Communities
- Educational institutions (schools, learning communities)
- Spiritual communities (churches, intentional neighborhoods)
- Mutual aid organizations and resource-sharing networks
- Wellbeing and healing centers
- Any institution ready to transform from control-based to trust-based governance

### Ethical Design Principles

**Human Sovereignty**: AI supports but never replaces human discernment, consent, and shared meaning
**Privacy by Default**: Personal coherence tools default to private, sharing is voluntary and sacred
**Transparency Without Surveillance**: Field-level feedback loops, not individual monitoring
**Trust Through Dialogue**: Relational trust earned through live dialogue, not automated scoring
**Suggestive, Not Prescriptive**: AI offers insight with reject/reframe options, never gives orders

## Recent Changes

### January 2025 - Deployment Module Implementation (January 11, 2025)
- **✅ START-HERE GLOBAL INVITATION PAGE**: Built comprehensive `/start-here` page with guided onboarding form routing serious inquiries to Ariel (arcanastrategies@gmail.com)
- **✅ FIELD LIBRARY GLOBAL KNOWLEDGE EXCHANGE**: Created `/field-library` route enabling communities worldwide to share governance patterns, practices, and stories
- **✅ CONTACT SYSTEM INTEGRATION**: Implemented contact.ts with Ariel's email and calendar links for guided community onboarding as specified in deployment documentation
- **✅ PROTOCOL LANGUAGE UPDATES**: Replaced all "ownership" language with "stewardship" and "participation" throughout platform
- **✅ ETHICAL DEPLOYMENT SCAFFOLDING**: Added privacy-first onboarding with human sovereignty principles and guided setup requirements
- **✅ FEDERATED KNOWLEDGE SHARING**: Field Library shows real-time global patterns from 247 communities across 89 countries with 52,891 knowledge ripples
- **✅ CIVIC OPERATING SYSTEM POSITIONING**: Updated platform messaging to emphasize "protocol for planetary regeneration" rather than SaaS product
- **✅ ROUTE STRUCTURE UPDATED**: Added new pages to App.tsx routing with proper authentication flow for public access to start-here and field-library
- **🎯 DEPLOYMENT READY**: Platform now implements all core deployment features from specification document for global community launch

### January 2025 - Core Governance Modules Development (January 11, 2025)
- **✅ COMPREHENSIVE LOOP LEDGER**: Built interactive Loop Ledger with local/global view toggle showing real-time community commitments and global interconnectedness
- **✅ SIGNAL DETECTION HUB**: Created Signal Detection Hub displaying global pattern recognition and mutual aid in real-time across communities
- **✅ COUNCIL SESSIONS**: Developed Council Sessions module showing active global decision-making with multi-lingual participation and transparency
- **✅ TRANSPARENCY REPORT**: Built comprehensive Transparency Report with local/global views showing mutual aid flows and decentralized accountability
- **✅ REAL-TIME INTERCONNECTEDNESS**: All modules clearly show how decentralized communities help each other worldwide with live feeds and examples
- **✅ MAYA CHAN REFERENCES REMOVED**: Cleaned up outdated personal references throughout the platform for broader community appeal
- **✅ PERSONAL COHERENCE TOOL ENHANCED**: Redesigned personal coherence section with clear instructions, better visual design, and privacy-first approach
- **✅ DASHBOARD INTEGRATION**: Successfully integrated all new governance modules into main dashboard with sacred space aesthetics
- **🎯 GLOBAL MUTUAL AID VISIBILITY**: Platform now transparently shows real-time examples of communities helping each other across regions

### January 2025 - Comprehensive User-Friendly Experience (January 11, 2025)
- **✅ COMPLETE SETUP WIZARD**: Built intuitive 4-step setup wizard with community type selection, values alignment, and size customization
- **✅ GUIDED TOUR SYSTEM**: Interactive tour explaining core governance tools, Signal Library knowledge sharing, and community features
- **✅ COMPREHENSIVE HELP CENTER**: Multi-tab help system with quick guides, video tutorials, FAQ, and community support
- **✅ USER-FRIENDLY BANNER**: Welcoming dashboard banner with quick tips, community values, and easy access to help resources
- **✅ SIMPLE NAVIGATION**: Clean navigation structure highlighting main sections and governance tools with descriptions
- **✅ ACCESSIBLE ONBOARDING**: Step-by-step wizard covers community naming, type selection, values, and primary focus areas
- **✅ BARRIER REDUCTION**: Multiple entry points for help, guidance, and support to make platform accessible to non-technical users
- **✅ COMMUNITY-FIRST DESIGN**: Emphasizes community ownership, privacy-first approach, and no corporate oversight throughout interface
- **✅ COMMUNITY WELLNESS CHECK**: Transformed technical "Field Health Map" into intuitive "Community Wellness Check" with plain language, explanatory help, and actionable suggestions
- **✅ INTERACTIVE WELLNESS MODULE**: Added expandable cards, progress bars, and click-to-expand functionality making health insights more engaging and accessible
- **✅ VISUAL ACCESSIBILITY**: Fixed badge contrast and visibility issues, improved color schemes, and enhanced readability throughout interface
- **🎯 MOVEMENT INFRASTRUCTURE**: Platform now optimized as federated infrastructure for 300+ global wellbeing movements

### January 2025 - User-Friendly Dashboard Enhancement (January 11, 2025)
- **✅ DASHBOARD CUSTOMIZATION SYSTEM**: Added comprehensive user preferences with 3 complexity levels (Simple, Standard, Full)
- **✅ FOCUS MODE OPTIONS**: Users can choose between Core Governance, Community Focus, Data & Insights, or Balanced view
- **✅ CULTURAL ANALYSIS TOGGLE**: Users can now disable cultural analysis features if they prefer simpler governance tools
- **✅ SIMPLE DASHBOARD INTRO**: Clean welcome interface for users who want minimal complexity with clear feature explanations
- **✅ ADAPTIVE NAVIGATION**: Dashboard tabs and features now show/hide based on user preferences to reduce overwhelm
- **✅ PREFERENCES PERSISTENCE**: User choices saved in localStorage for consistent experience across sessions
- **✅ VISUAL SIMPLIFICATION**: Complex metrics can be hidden, badges optional, and layout adapts to user comfort level
- **🎯 USER FEEDBACK INTEGRATION**: Dashboard now responds to feedback about cultural analysis being "not everyone's cup of tea"

### January 2025 - Final Deployment Completion (January 11, 2025)
- **✅ COMPREHENSIVE TRUST SYSTEM OVERHAUL**: Completely removed ALL numeric trust scoring from frontend, backend, and API routes
- **✅ ETHICAL STRUCTURE COMPLIANCE**: All trust interactions now use qualitative states only - "Rooted" (🌿), "Emerging" (🌱), "Dormant" (💤), "Tending" (🔧)
- **✅ BACKEND PURIFICATION**: Eliminated calculateTrustAdjustment numeric calculations, applyTrustDecay scoring, and API trust score endpoints
- **✅ FRONTEND SANITIZATION**: Trust Activity Feed shows "Strengthened/Adjusting" instead of numeric values, Institution Settings removed numeric controls
- **✅ REPLICATION INFRASTRUCTURE**: Complete `/replication` page with setup guide, checklist, and community support
- **✅ ACTIVE DOMAIN TRACKER**: Governance module management system with freeze/active toggles
- **✅ TRANSPARENCY DIGEST**: Funding flows, pod contributions, and activity reports page
- **✅ LANDING PAGE**: Properly routed to `/welcome` as public intro page
- **✅ DASHBOARD STABILITY**: Fixed import errors and navigation integration
- **✅ DATABASE MIGRATION COMPLETE**: Successfully migrated trust_score to trust_state with proper value conversion
- **✅ SACRED CONFIGURATION FORMATTING**: Improved spacing, typography, and layout for better readability
- **✅ GOVERNANCE PHILOSOPHY INTEGRATION**: Updated documentation to reflect core principles from development history
- **✅ INTERNATIONAL ACCESSIBILITY**: Complete i18n system with 8 languages (English, Spanish, French, German, Portuguese, Chinese, Japanese, Arabic)
- **✅ GLOBAL SETUP WIZARD**: Multi-step onboarding with language selection, regional governance patterns, institution types, and cultural context customization
- **✅ LAYERED ARCHITECTURE**: Restructured for global deployment with region-specific governance patterns and cultural sensitivity
- **✅ FIELD CHARTER IMPLEMENTATION**: Complete protocol charter explaining stewardship model, replication rights, and ethical guarantees
- **✅ STEWARDSHIP FOOTER**: Footer with "Field Nexus is a shared protocol for coherence. It is stewarded, not owned."
- **✅ FIELD COMPARISON PLACEHOLDER**: Scaffolded federation features for future field network connectivity
- **✅ PROTOCOL LANGUAGE UPDATES**: Changed "admin" to "steward" and "Internal Tools" to "Protocol Tools" throughout interface
- **🎯 DEPLOYMENT STATUS**: Field Nexus is now 100% complete and ready for global deployment as a decentralized civic protocol

### January 2025 - Field Orientation Button Fix (January 11, 2025)
- **Fixed critical bug** in Field Orientation modal where "Skip Orientation" and "Enter the Field" buttons weren't working
- **Resolved API request syntax error** - changed from apiRequest to direct fetch call with proper PATCH method
- **Added proper error handling** and headers for orientation completion endpoint
- **Updated database schema** with hasSeenOrientation field and corresponding backend storage methods
- **Verified functionality** - both buttons now successfully complete orientation and close modal
- **User feedback**: "i believe it worked" - Field Orientation system now fully functional

### January 2025 - Language Refinement for Field Health Focus
- **Removed therapeutic/self-help language** throughout platform to focus on collective field health rather than individual healing
- **Updated "healing journey"** terminology to "field restoration" and "restoration process" 
- **Replaced "healing activities"** with "restoration activities" in sanctuary protocols
- **Changed therapeutic references** to "community" context in ritual creation
- **Updated README tagline** from "Hierarchy to Healing" to "Hierarchy to Collective Governance"
- **Language principle**: Platform analyzes collective field health patterns rather than providing individual therapeutic outcomes
- **Core focus**: Community governance, field coherence, and collective decision-making over personal healing journeys
- **Updated "trust circles"** to "Coherence Networks" for more futuristic terminology focused on field intelligence

### January 2025 - Human Sovereignty & AI Transparency Implementation
- Implemented comprehensive AI Transparency Labels with explanations and reject/reframe buttons for all AI-generated content
- Replaced individual scoring dashboard with Field Health Map focusing on collective patterns over personal metrics
- Created Trust Circles component for human-facilitated relationship building rather than automated trust scoring
- Added privacy-first Personal Coherence Tools that default to private with voluntary sharing options
- Enhanced field-level feedback loops prioritizing community wisdom over data extraction
- Integrated "Human Wisdom" badges to distinguish community-generated insights from AI analysis
- All AI suggestions now include explanations and user autonomy controls (reject/reframe functionality)
- System redesigned to support human discernment and consent rather than replace decision-making authority

### January 2025 - Complete Button Functionality Implementation  
- Built all 5 core button functionalities: Create Signal ✅, Field Side Work ✅, Tend the Field ✅, Host a Circle ✅, Pattern Pulse ✅
- Created comprehensive "Tend the Field" modal with 4 guided practices: field meditation, pulse checking, gratitude practice, and intention setting
- Built "Pattern Pulse" modal displaying real-time field data summary with system health overview, module status grid, and recent activity feed
- Developed "Host a Circle" modal with complete facilitation guides for 3 circle types: Signal Reflection, Conflict Transformation, and Decision Council
- Each guide includes phase-by-phase instructions, timing, participant guidelines, and essential facilitation tips
- All modals follow futuristic night theme with cyber colors and electric effects

### January 2025 - Futuristic Night Mode Implementation (Final)
- Completely removed day/light theme - platform now exclusively uses futuristic night mode
- Changed header branding from "Civic Signal Hub" to "Field Nexus" with cyber gradient text effect
- Updated navigation header with black/cyber background, cyan/purple gradients and electric glow effects
- Forced dark mode globally in HTML body and main.tsx - no theme toggle needed
- Enhanced all UI elements with cyber colors: cyan (#00FFFF), electric purple (#9D4EDD), and electric green (#4AFF4A)
- Fixed system status banner visibility with white text and proper contrast for night mode
- Created immersive futuristic experience with glassmorphic effects and electric animations

### January 2025 - Critical Features Implementation for Community Deployment  
- Created comprehensive Signal Creation Modal with intuitive signal type selection, domain mapping, and severity levels
- Built complete Field Agreement component with 4-step onboarding process covering principles, governance, commitments, and sacred agreement
- Added Signal Creation integration to Signal Detection component with proper modal triggers
- Developed Side Work Access interface with task browsing, acceptance, completion workflows
- Enhanced Side Work Board with proper user experience for gentle coherence restoration
- Fixed all Signal Detection interface issues with proper import statements and component integration
- Updated deployment materials specifically for wellbeing communities and healing institutions
- All critical user-facing features now implemented and functional for real community deployment

## Past Changes

### January 2025 - Institution Bundle Selector Revamp
- Completely redesigned Institution Bundle Selector with poetic descriptions and symbolic icons
- Added 6 distinct bundles: Learning Grove, Sacred Circle, Solidarity Web, Wellspring Haven, Rooted Commons, Expression Field
- Created visually distinct backgrounds with gradient themes per bundle type
- Built comprehensive customization flow with editable governance parameters, rituals, and trust settings
- Added preview of key differences showing loop types, ritual styles, signal behavior, and governance approaches
- Implemented tabbed customization interface for governance, rituals, signals, and trust configuration
- Enhanced sacred space aesthetics with forest-themed color palette and gentle micro-interactions

### January 2025 - Trust Score Auto-Update System Implementation
- Implemented comprehensive trust score auto-update logic based on user behavior patterns
- Added trust scoring for loop completion consistency (+0.1 on-time, +0.05 late completion)
- Created signal accuracy evaluation system (+0.15 accurate, -0.1 inaccurate signals)
- Built coherence pings feature (+0.05 per ping from others, max +0.2 daily)
- Added trust decay scheduler (-0.01 per day after 30 days inactivity, minimum 1.0)
- Created Trust Activity Feed component displaying real-time trust score changes
- Integrated automated trust updates with loop completion and swarm signal creation
- Added API endpoints for manual trust adjustments and system maintenance

### January 2025 - System Health Banner Implementation
- Created comprehensive System Health Banner displaying real-time status for all 6 core modules
- Added color-coded status indicators (Green=Live, Yellow=Partial, Red=Inactive) with response time monitoring
- Integrated automatic health checks every 60 seconds with system coherence percentage display
- Enhanced spacing and centering based on user feedback for better visual hierarchy
- Banner shows operational status, response times, error details, and last update timestamp

### January 2025 - Loop Creation Validation Bug Fix
- Fixed critical validation issues in Loop Creation Interface with comprehensive field validation
- Added real-time error display with alert icons and required field indicators (*)
- Fixed API request format and date handling to properly update database
- Enhanced loading states and confirmation animation for better user experience
- All required fields now properly validated before submission with clear error messaging

### January 2025 - Quick Start Wizard Navigation Fix
- Fixed critical navigation issue where "View Commitments" and "Explore Dashboard" buttons weren't working
- User feedback: "explore dashboard and view commitments dont work, why?" - resolved JSX syntax error and navigation logic
- Updated wizard to neutralize overly feminine/poetic language while maintaining professional tone
- Fixed "Skip for now" functionality to properly complete onboarding and dismiss wizard
- Both final buttons now correctly complete onboarding AND navigate to governance section
- Added proper callback system to pass navigation target from wizard to dashboard

### January 2025 - Field Side Work Module & Sacred Space Transformation
- Successfully implemented complete "Field Side Work" system for gentle coherence restoration
- Added database schema, React components, API routes, and dashboard integration
- User feedback: "did all of this wonderfully" - implementation meets vision for gentle, non-gamified approach
- System now supports four main governance sections with seamless navigation
- Added ritual closure prompt: "What shifted for you? What did you notice?" - optional reflection after task completion
- Added quiet archive showing monthly contributions: "You've contributed X side work acts this month. The field thanks you."

### January 2025 - Poetic Quick Start Wizard Implementation
- Completely transformed Quick Start Wizard with minimalist, poetic structure
- User feedback on structure: "something similar to..." with beautiful 5-step flow using emojis and sacred language
- Steps now follow exact poetic format: Welcome (🌿), Loops (🔁), Signals (🌀), Resources (💠), Council (🫱), Begin (🌸)
- Each step uses large emoji, single profound statement, and sacred space aesthetic
- Final step offers gentle action invitations: "Join a Loop" and "Tend the Field" with "Skip for now" option
- Added onboarding completion tracking to user database schema for one-time display
- Wizard appears only for new users, disappears after completion or skipping

### Sacred Space Aesthetics Implementation
- Complete visual transformation to earth tones and sage accents for sacred civic space feeling
- Forest-like typography with breathing space and relaxed line heights
- Sacred space micro-interactions: soft hovers, glowing checkmarks, fluid transitions
- Invitation-tone language throughout: "Essential Field Work" instead of "Core Governance"
- Gentle color palette with CSS variables for forest-green, sage-mist, earth-warm, sanctuary-blue
- Created comprehensive onboarding flow with Field Agreement and Starter Kit Generator
- Added Landing page for logged-out users with sacred space design and field principles

## System Architecture

### Full-Stack Modern Web Application
- **Frontend**: React with TypeScript using Vite as the build tool
- **Backend**: Express.js server with TypeScript
- **Database**: PostgreSQL with Drizzle ORM for type-safe database operations
- **Real-time Communication**: WebSocket integration for live updates
- **Styling**: Tailwind CSS with shadcn/ui component library
- **Internationalization**: React-i18next with 8 language support
- **Global Setup**: Multi-step wizard for worldwide deployment

### Modular Design Philosophy
The application is built around the concept of governance "modules" that can be mixed and matched based on institutional needs (schools, churches, mutual aid groups, neighborhoods). The system now includes:

**Global Accessibility Features:**
- Multi-language support with culturally appropriate translations
- Regional governance pattern recognition and customization
- Institution-specific starter bundles with localized examples
- Cultural values integration for community-appropriate governance styles
- Timezone and regional context awareness

**Layered Architecture Benefits:**
- **Setup Layer**: Comprehensive onboarding that adapts to language, region, and cultural context
- **Governance Layer**: Core functionality customized based on institutional type and cultural values
- **Cultural Layer**: Rituals, practices, and language that reflect community values
- **Replication Layer**: Tools for spreading governance patterns across different cultural contexts

## Key Components

### 1. Frontend Architecture (React/TypeScript)
- **Component Library**: shadcn/ui for consistent, accessible UI components
- **State Management**: TanStack React Query for server state management
- **Routing**: Wouter for lightweight client-side routing
- **Real-time Updates**: Custom WebSocket hook for live data synchronization
- **Enhanced UI**: Tabbed dashboard with Core Governance, Enhanced Analytics, and Cultural Layer sections

### 2. Backend Architecture (Express/Node.js)
- **API Design**: RESTful endpoints with real-time WebSocket layer
- **Database Layer**: Drizzle ORM with PostgreSQL for type-safe database operations
- **Middleware**: Express middleware for request logging and error handling
- **Development**: Vite integration for seamless development experience

### 3. Database Schema (PostgreSQL)
Core entities include:
- **Users**: Profile management with trust scores and participation metrics
- **Loops**: Enhanced commitment tracking with ripple analysis, regenerative markers, and sanctuary status
- **Signals**: System health indicators with false resonance detection and diversity checks
- **Decisions**: Collaborative decision-making processes
- **Resources**: Resource allocation and transparency tracking
- **Trust Actions**: Trust-building and accountability mechanisms
- **Field Rituals**: Cultural strengthening practices (NEW)
- **Sanctuary Protocols**: Healing and re-entry processes (NEW)
- **Coherence Measurements**: Detailed system alignment scoring (NEW)

### 4. Core Governance Modules
- **Loop Ledger**: Commitment tracking and accountability system
- **Signal Detection**: Early warning system for organizational health
- **Decision Council**: Collective decision-making interface
- **Resource Allocation**: Transparent resource management
- **Trust System**: Reputation and participation token management
- **Institution Settings**: Customizable governance bundles

### 5. Enhanced Analytics (NEW - December 2024)
- **Ripple Check**: Impact analysis showing immediate, short-term, and long-term effects
- **Coherence Scoring**: Detailed measurement of system alignment with false resonance detection
- **Sanctuary Protocols**: Healing and conflict resolution processes with guided re-entry

### 6. Cultural Layer (NEW - December 2024)
- **Field Rituals**: Optional practices to strengthen community bonds
- **Cultural Translation**: Institution-specific lexicons and practices
- **Regenerative Patterns**: Focus on growth rather than extraction

### 7. Field Side Work (NEW - January 2025)
- **Gentle Task System**: Small regenerative actions to dissolve false resonance
- **False Resonance Detection**: Soft flags for over-performing, avoiding accountability, charisma loops
- **Coherence Restoration**: User-driven activities that strengthen field integrity
- **Trust State Integration**: Completed side work helps rebuild trust through action, not punishment
- **Cultural Regulation**: Ritual of re-attunement rather than gamified scoring

## Data Flow

### Request/Response Pattern
1. Frontend components use React Query to fetch data from REST endpoints
2. Express server handles API requests and interacts with PostgreSQL via Drizzle ORM
3. Real-time updates are pushed via WebSocket for immediate UI synchronization
4. All database operations are type-safe through Drizzle schema definitions

### Real-time Updates
- WebSocket server broadcasts changes to all connected clients
- Frontend components automatically re-render with fresh data
- System health metrics update every 30 seconds
- Activity logs provide real-time governance event tracking

## External Dependencies

### Core Framework Dependencies
- **Database**: Neon serverless PostgreSQL for scalable data storage
- **UI Components**: Radix UI primitives with shadcn/ui abstractions
- **Form Handling**: React Hook Form with Zod validation
- **Date Utilities**: date-fns for date manipulation
- **Icons**: Font Awesome and Lucide React icons

### Development Tools
- **Build Tool**: Vite for fast development and optimized production builds
- **TypeScript**: Full type safety across frontend and backend
- **Database Migrations**: Drizzle Kit for schema management
- **Session Management**: Connect-pg-simple for PostgreSQL session storage

## Deployment Strategy

### Build Process
- **Frontend**: Vite builds the React application to static assets
- **Backend**: esbuild bundles the Express server for Node.js deployment
- **Database**: Drizzle migrations handle schema updates

### Environment Configuration
- **Development**: Local development with hot reloading via Vite
- **Production**: Optimized builds with static asset serving
- **Database**: Environment-based connection strings for different deployment stages

### Replit Integration
- Custom Vite plugins for Replit development environment
- Runtime error overlay for enhanced debugging
- Cartographer plugin for development tooling integration

The system is designed to be easily deployable across different environments while maintaining consistent behavior and performance characteristics.